"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[34],{9381:(t,e,a)=>{a.r(e),a.d(e,{default:()=>i});const s={name:"message-listing",data:function(){return{messages:[],loading:!0,pagination:{total:0,per_page:15,current_page:1,last_page:0,from:1,to:15},paginationOptions:{offset:4,previousText:"Prev",nextText:"Next",alwaysShowPrevNext:!0}}},computed:{perPage:function(){return this.pagination.per_page}},watch:{perPage:function(t,e){this.pagination.current_page=1}},methods:{loadMessages:function(){var t=this,e={params:{paginate:this.pagination.per_page,page:this.pagination.current_page}};this.loading=!0,axios.get("/api/messages",e).then((function(e){t.messages=e.data.data,t.pagination=e.data.meta,t.loading=!1}))},formatMessage:function(t,e){if("ALLSTATIONS"===e){var a=t.length,s=t.match(/.{1,30}/g).join("<br />");return 30!==a?"["+a+" CHAR]<br />"+s:s}return"OTHER"===e?t.replace(/(?:\r\n|\r|\n)/g,"<br />"):t}},mounted:function(){this.loadMessages()}};const i=(0,a(1900).Z)(s,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("div",{staticClass:"card"},[e("div",{staticClass:"card-header"},[e("h3",{staticClass:"card-title"},[t._v("Messages")]),t._v(" "),e("div",{staticClass:"card-tools"},[e("a",{staticClass:"float-right pl-2",attrs:{href:""},on:{click:t.loadMessages}},[e("i",{staticClass:"fa fa-sync"})]),t._v(" "),e("div",{staticClass:"input-group input-group-sm",staticStyle:{width:"150px"}},[t._m(0),t._v(" "),e("select",{directives:[{name:"model",rawName:"v-model",value:t.pagination.per_page,expression:"pagination.per_page"}],staticClass:"form-control float-right",attrs:{disabled:!0===t.loading},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.pagination,"per_page",e.target.multiple?a:a[0])}}},[e("option",{attrs:{value:"5"}},[t._v("5")]),t._v(" "),e("option",{attrs:{value:"10"}},[t._v("10")]),t._v(" "),e("option",{attrs:{value:"15"}},[t._v("15")]),t._v(" "),e("option",{attrs:{value:"20"}},[t._v("20")]),t._v(" "),e("option",{attrs:{value:"25"}},[t._v("25")]),t._v(" "),e("option",{attrs:{value:"50"}},[t._v("50")]),t._v(" "),e("option",{attrs:{value:"75"}},[t._v("75")]),t._v(" "),e("option",{attrs:{value:"100"}},[t._v("100")])])])])]),t._v(" "),e("div",{staticClass:"card-body table-responsive p-0"},[e("table",{staticClass:"table table-hover"},[t._m(1),t._v(" "),!0===t.loading?e("tbody",[e("tr",[e("td",{attrs:{colspan:"6"}},[e("vue-loading",{attrs:{type:"bubbles",color:"#d9544e",size:{width:"50px",height:"50px"}}})],1)])]):t._e(),t._v(" "),!1===t.loading?e("tbody",t._l(t.messages,(function(a){return e("tr",{key:a.id},[e("td",[t._v(t._s(a.type))]),t._v(" "),e("td",[t._v(t._s(a.time))]),t._v(" "),e("td",[""===a.receiver?e("p",{staticClass:"text-muted text-sm"},[e("b",[t._v("Sender: ")]),t._v(" "+t._s(a.sender)+"\n                                ")]):e("p",{staticClass:"text-muted text-sm"},[e("b",[t._v("Sender: ")]),t._v(" "+t._s(a.sender)+" "),e("br"),t._v(" "),e("b",[t._v("Receiver: ")]),t._v(" "+t._s(a.receiver)+"\n                                ")])]),t._v(" "),e("td",[e("span",{staticStyle:{"font-family":"monospace"},domProps:{innerHTML:t._s(t.formatMessage(a.message,a.type))}})]),t._v(" "),e("td",[e("p",{staticClass:"text-muted text-sm"},[e("b",[t._v("Recordings: ")]),t._v(" "+t._s(a.recording_count)+" "),e("br"),t._v(" "),e("b",[t._v("Comments: ")]),t._v(" "+t._s(a.comment_count)+" "),e("br"),t._v(" "),e("b",[t._v("Submitter: ")]),t._v(" "),"user"===a.user.type?e("router-link",{attrs:{tag:"a",to:{name:"user-view",params:{user_id:a.user.id}}}},[t._v("\n                                        "+t._s(a.user.name)+"\n                                    ")]):t._e(),t._v(" "),"guest"===a.user.type?e("router-link",{attrs:{tag:"a",to:{name:"guest-view",params:{guest_id:a.user.id}}}},[t._v("\n                                        "+t._s(a.user.name)+"\n                                    ")]):t._e()],1)]),t._v(" "),e("td",[e("router-link",{attrs:{tag:"a",to:{name:"message-view",params:{message_id:a.id}}}},[e("i",{staticClass:"fa fa-eye"})]),t._v(" "),a.permissions.update?e("router-link",{attrs:{tag:"a",to:{name:"message-edit",params:{message_id:a.id}}}},[e("i",{staticClass:"fa fa-edit"})]):t._e(),t._v(" "),a.permissions.delete?e("router-link",{attrs:{tag:"a",to:{name:"message-delete",params:{message_id:a.id}}}},[e("i",{staticClass:"fa fa-trash"})]):t._e()],1)])})),0):t._e()])]),t._v(" "),e("div",{staticClass:"card-footer clearfix"},[e("pagination",{attrs:{pagination:t.pagination,callback:t.loadMessages,options:t.paginationOptions}})],1)])])])}),[function(){var t=this._self._c;return t("div",{staticClass:"input-group-prepend"},[t("span",{staticClass:"input-group-text"},[this._v("Per Page")])])},function(){var t=this,e=t._self._c;return e("thead",[e("tr",[e("th",[t._v("Type")]),t._v(" "),e("th",[t._v("Time")]),t._v(" "),e("th",[t._v("Sender/Receiver")]),t._v(" "),e("th",[t._v("Message")]),t._v(" "),e("th",[t._v("Counts/Submitter")]),t._v(" "),e("th",[t._v("Actions")])])])}],!1,null,"0e8f0dbe",null).exports}}]);