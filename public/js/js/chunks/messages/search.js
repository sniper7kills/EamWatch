"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[148],{5811:(e,t,a)=>{a.r(t),a.d(t,{default:()=>r});const s={name:"message-listing",data:function(){return{messages:[],loading:!0,pagination:{total:0,per_page:15,current_page:1,last_page:0,from:1,to:15},paginationOptions:{offset:4,previousText:"Prev",nextText:"Next",alwaysShowPrevNext:!0}}},computed:{perPage:function(){return this.pagination.per_page}},watch:{perPage:function(e,t){this.pagination.current_page=1}},methods:{loadMessages:function(){var e=this,t={params:{paginate:this.pagination.per_page,page:this.pagination.current_page,search:this.$route.query.q}};this.loading=!0,axios.get("/api/search",t).then((function(t){e.messages=t.data.data,e.pagination=t.data.meta,e.loading=!1}))},formatMessage:function(e,t,a){if("ALLSTATIONS"===t){var s=e.length,r=e.match(/.{1,30}/g).join("<br />");return 30!==s&&(r="["+s+" CHAR]<br />"+r),a>0&&(r="["+a+" REPEATS]<br />"+r),r}return"OTHER"===t?e.replace(/(?:\r\n|\r|\n)/g,"<br />"):e}},mounted:function(){this.loadMessages()}};const r=(0,a(1900).Z)(s,(function(){var e=this,t=e._self._c;return t("div",[e._m(0),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-12"},[t("div",{staticClass:"card"},[t("div",{staticClass:"card-header"},[t("h3",{staticClass:"card-title"},[e._v("Messages")]),e._v(" "),t("div",{staticClass:"card-tools"},[t("a",{staticClass:"float-right pl-2",attrs:{href:""},on:{click:e.loadMessages}},[t("i",{staticClass:"fa fa-sync"})]),e._v(" "),t("div",{staticClass:"input-group input-group-sm",staticStyle:{width:"150px"}},[e._m(1),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.pagination.per_page,expression:"pagination.per_page"}],staticClass:"form-control float-right",attrs:{disabled:!0===e.loading},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.pagination,"per_page",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:"5"}},[e._v("5")]),e._v(" "),t("option",{attrs:{value:"10"}},[e._v("10")]),e._v(" "),t("option",{attrs:{value:"15"}},[e._v("15")]),e._v(" "),t("option",{attrs:{value:"20"}},[e._v("20")]),e._v(" "),t("option",{attrs:{value:"25"}},[e._v("25")]),e._v(" "),t("option",{attrs:{value:"50"}},[e._v("50")]),e._v(" "),t("option",{attrs:{value:"75"}},[e._v("75")]),e._v(" "),t("option",{attrs:{value:"100"}},[e._v("100")])])])])]),e._v(" "),t("div",{staticClass:"card-body table-responsive p-0"},[t("table",{staticClass:"table table-hover"},[e._m(2),e._v(" "),!0===e.loading?t("tbody",[t("tr",[t("td",{attrs:{colspan:"6"}},[t("vue-loading",{attrs:{type:"bubbles",color:"#d9544e",size:{width:"50px",height:"50px"}}})],1)])]):e._e(),e._v(" "),!1===e.loading?t("tbody",e._l(e.messages,(function(a){return t("tr",{key:a.id},[t("td",[e._v(e._s(a.type))]),e._v(" "),t("td",[e._v(e._s(a.time))]),e._v(" "),t("td",[""===a.receiver?t("p",{staticClass:"text-muted text-sm"},[t("b",[e._v("Sender: ")]),e._v(" "+e._s(a.sender)+"\n                                    ")]):t("p",{staticClass:"text-muted text-sm"},[t("b",[e._v("Sender: ")]),e._v(" "+e._s(a.sender)+" "),t("br"),e._v(" "),t("b",[e._v("Receiver: ")]),e._v(" "+e._s(a.receiver)+"\n                                    ")])]),e._v(" "),t("td",[t("span",{staticStyle:{"font-family":"monospace"},domProps:{innerHTML:e._s(e.formatMessage(a.message,a.type,a.repeats))}})]),e._v(" "),t("td",[t("p",{staticClass:"text-muted text-sm"},[t("b",[e._v("Recordings: ")]),e._v(" "+e._s(a.recording_count)+" "),t("br"),e._v(" "),t("b",[e._v("Comments: ")]),e._v(" "+e._s(a.comment_count)+" "),t("br"),e._v(" "),t("b",[e._v("Submitter: ")]),e._v(" "),"user"===a.user.type?t("router-link",{attrs:{tag:"a",to:{name:"user-view",params:{user_id:a.user.id}}}},[e._v("\n                                            "+e._s(a.user.name)+"\n                                        ")]):e._e(),e._v(" "),"guest"===a.user.type?t("router-link",{attrs:{tag:"a",to:{name:"guest-view",params:{guest_id:a.user.id}}}},[e._v("\n                                            "+e._s(a.user.name)+"\n                                        ")]):e._e()],1)]),e._v(" "),t("td",[t("router-link",{attrs:{tag:"a",to:{name:"message-view",params:{message_id:a.id}}}},[t("i",{staticClass:"fa fa-eye"})]),e._v(" "),a.permissions.update?t("router-link",{attrs:{tag:"a",to:{name:"message-edit",params:{message_id:a.id}}}},[t("i",{staticClass:"fa fa-edit"})]):e._e(),e._v(" "),a.permissions.delete?t("router-link",{attrs:{tag:"a",to:{name:"message-delete",params:{message_id:a.id}}}},[t("i",{staticClass:"fa fa-trash"})]):e._e()],1)])})),0):e._e()])]),e._v(" "),t("div",{staticClass:"card-footer clearfix"},[t("pagination",{attrs:{pagination:e.pagination,callback:e.loadMessages,options:e.paginationOptions}})],1)])])])])}),[function(){var e=this,t=e._self._c;return t("div",{staticClass:"alert alert-info alert-dismissible"},[t("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"alert","aria-hidden":"true"}},[e._v("Ã—")]),e._v(" "),t("h5",[t("i",{staticClass:"icon fas fa-search"}),e._v(" Search Info")]),e._v("\n        Use the following search format to customize your search:"),t("br"),e._v(" "),t("b",[e._v("length:{message_length}")]),e._v(" To search for messages greater than or equal to the desired message length"),t("br"),e._v(" "),t("b",[e._v("sender:{sender}")]),e._v(" To search for messages sent from the specified callsign"),t("br"),e._v(" "),t("b",[e._v("receiver:{receiver}")]),e._v(" To search for messages sent to the specified callsign"),t("br"),e._v(" "),t("b",[e._v("type:{message_type}")]),e._v(" To search for messages of a specific type. Valid types ['BACKEND', 'SKYKING', 'ALLSTATIONS', 'RADIOCHECK', 'SKYMASTER', 'SKYBIRD', 'DISREGARDED', 'OTHER']"),t("br"),e._v(" "),t("b",[e._v("date:{YYYY-MM-DDTHH:MM}")]),e._v(" to search for messages by date and time. (Note the T is required to seperate the date and time.)"),t("br"),e._v(" "),t("b",[e._v("user:{user_id}")]),e._v(" to search for messages by submitter based on their ID."),t("br")])},function(){var e=this._self._c;return e("div",{staticClass:"input-group-prepend"},[e("span",{staticClass:"input-group-text"},[this._v("Per Page")])])},function(){var e=this,t=e._self._c;return t("thead",[t("tr",[t("th",[e._v("Type")]),e._v(" "),t("th",[e._v("Time")]),e._v(" "),t("th",[e._v("Sender/Receiver")]),e._v(" "),t("th",[e._v("Message")]),e._v(" "),t("th",[e._v("Counts/Submitter")]),e._v(" "),t("th",[e._v("Actions")])])])}],!1,null,"db83a1be",null).exports}}]);